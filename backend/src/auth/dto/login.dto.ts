/**
 * 登录数据传输对象（DTO）
 *
 * 【DTO 的作用】
 * DTO（Data Transfer Object）用于：
 * 1. 数据验证：确保前端传来的数据符合要求
 * 2. 类型安全：TypeScript 提供类型检查
 * 3. 文档说明：明确 API 需要哪些字段
 * 4. 数据转换：可以转换数据格式（如日期字符串转 Date）
 *
 * 【设计模式：数据传输对象模式】
 * DTO 是后端开发中常用的设计模式：
 * - 将数据从一层传递到另一层
 * - 不包含业务逻辑，只包含数据定义
 * - 可以添加验证规则和转换逻辑
 *
 * 【后端开发思维：输入验证】
 * 永远不要信任前端传来的数据！
 * - 前端可能被绕过（直接调用 API）
 * - 恶意用户可能发送非法数据
 * - 必须在后端进行验证
 *
 * 【验证流程】
 * 1. 前端发送请求：{ email: "user@example.com", password: "123456" }
 * 2. NestJS 自动验证 DTO（通过 class-validator）
 * 3. 如果验证失败，自动返回 400 Bad Request，包含错误信息
 * 4. 如果验证通过，数据传递给控制器和服务
 *
 * 【class-validator 装饰器】
 * - @IsEmail() - 验证邮箱格式
 * - @IsNotEmpty() - 验证非空
 * - @MinLength(6) - 验证最小长度
 * - @IsString() - 验证字符串类型
 * - 等等...
 */
import { IsEmail, IsNotEmpty } from 'class-validator';

/**
 * LoginDto - 登录数据传输对象
 *
 * 【字段说明】
 * - email: 用户邮箱（用于登录）
 * - password: 用户密码（明文，不加密）
 *
 * 【为什么登录用邮箱而不是用户名？】
 * - 邮箱通常唯一且稳定
 * - 便于找回密码（发送邮件）
 * - 国际化友好（用户名可能有重复）
 *
 * 【安全提示】
 * - password 字段存储的是明文密码（用户输入的）
 * - 不会存储到数据库，只用于验证
 * - 验证后会立即丢弃，不会在响应中返回
 */
export class LoginDto {
  /**
   * email - 用户邮箱
   *
   * @IsEmail({}, { message: '邮箱格式不正确' })
   * - 验证邮箱格式（如：user@example.com）
   * - {} 表示使用默认验证选项
   * - message 是验证失败时的错误信息
   *
   * 【验证规则】
   * - 必须包含 @ 符号
   * - @ 前后必须有内容
   * - 域名部分必须有效
   */
  @IsEmail({}, { message: '邮箱格式不正确' })
  email: string;

  /**
   * password - 用户密码
   *
   * @IsNotEmpty({ message: '密码不能为空' })
   * - 验证密码不能为空
   * - 注意：这里不验证密码长度（登录时不需要）
   * - 密码长度验证在注册时进行
   *
   * 【为什么登录不验证密码长度？】
   * - 用户可能使用短密码（虽然不推荐）
   * - 验证长度应该在注册时进行
   * - 登录时只需要验证密码是否正确
   */
  @IsNotEmpty({ message: '密码不能为空' })
  password: string;
}
