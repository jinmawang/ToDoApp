# MySQL 是什么？为什么需要它？

## 一、MySQL 是什么？

**MySQL** 是一个**关系型数据库管理系统（RDBMS）**，简单来说，就是一个**专门用来存储和管理数据的软件**。

### 类比理解

想象一下：
- **Excel 表格**：用来存储数据，可以创建多个工作表，每个表有行和列
- **MySQL**：就像一个超级强大的 Excel，可以：
  - 存储海量数据（几百万、几千万条记录）
  - 多人同时访问和修改，不会冲突
  - 快速查找数据（即使数据量很大）
  - 保证数据安全（不会丢失）
  - 支持复杂的查询和分析

---

## 二、为什么需要 MySQL（数据库）？

### 场景对比：您的 Todo List 项目

#### 场景 1：不用数据库（当前的内存数组方式）

```typescript
// todo.service.ts（改造前）
private todos: Todo[] = [];  // 数据存在内存中
```

**问题**：
1. ❌ **数据会丢失**：服务重启后，所有 Todo 都没了
2. ❌ **无法持久化**：电脑关机，数据就没了
3. ❌ **无法共享**：如果有多台服务器，数据无法共享
4. ❌ **容量限制**：内存有限，数据多了会占满内存
5. ❌ **不安全**：程序崩溃，数据就没了

**就像**：把重要文件写在便利贴上，风一吹就没了。

---

#### 场景 2：使用 MySQL 数据库（改造后）

```typescript
// todo.service.ts（改造后）
await this.todoRepository.save(todo);  // 保存到数据库
```

**优势**：
1. ✅ **数据持久化**：数据保存在硬盘上，服务重启后还在
2. ✅ **永久保存**：除非手动删除，数据不会丢失
3. ✅ **可以共享**：多台服务器可以连接同一个数据库
4. ✅ **容量巨大**：可以存储几千万、几亿条数据
5. ✅ **安全可靠**：有备份、恢复机制，数据更安全

**就像**：把重要文件存在保险柜里，安全可靠。

---

## 三、MySQL 的核心概念

### 1. 数据库（Database）
- **类比**：一个 Excel 文件
- **作用**：存放多个相关的表
- **例子**：`todo_db` 数据库，里面可以放 `todos` 表、`users` 表等

### 2. 表（Table）
- **类比**：Excel 中的一个工作表
- **作用**：存储同一类数据
- **例子**：`todos` 表，存储所有待办事项

### 3. 行（Row / Record）
- **类比**：Excel 中的一行
- **作用**：一条完整的数据记录
- **例子**：一条 Todo：`{ id: 1, title: 'Learn NestJS', isCompleted: false }`

### 4. 列（Column / Field）
- **类比**：Excel 中的一列
- **作用**：数据的某个属性
- **例子**：`id`、`title`、`isCompleted` 都是列

### 5. SQL（Structured Query Language）
- **类比**：和数据库"对话"的语言
- **作用**：用来查询、插入、更新、删除数据
- **例子**：
  ```sql
  SELECT * FROM todos;  -- 查询所有 Todo
  INSERT INTO todos (title) VALUES ('New Todo');  -- 插入新 Todo
  ```

---

## 四、MySQL 在您的项目中的作用

### 当前项目结构

```
前端 (Vue 3)
    ↓ HTTP 请求
后端 (NestJS)
    ↓ TypeORM
MySQL 数据库
    ↓ 存储
硬盘（持久化）
```

### 数据流向

1. **用户在前端添加 Todo**
   ```
   用户输入 → Vue 前端 → HTTP POST → NestJS 后端
   ```

2. **后端保存到数据库**
   ```
   NestJS → TypeORM → MySQL → 硬盘存储
   ```

3. **用户查看 Todo**
   ```
   用户刷新 → Vue 前端 → HTTP GET → NestJS 后端
   → TypeORM 查询 → MySQL → 返回数据 → 前端显示
   ```

---

## 五、为什么选择 MySQL？

### MySQL 的优势

1. **免费开源**：个人和小公司可以免费使用
2. **性能优秀**：处理大量数据时速度快
3. **稳定可靠**：被很多大公司使用（Facebook、Twitter、YouTube 等）
4. **生态成熟**：工具多、文档全、社区活跃
5. **易于学习**：SQL 语法相对简单

### 其他数据库选择

| 数据库 | 特点 | 适用场景 |
|--------|------|----------|
| **MySQL** | 免费、稳定、性能好 | 大多数 Web 应用（推荐） |
| **PostgreSQL** | 功能强大、支持复杂查询 | 需要复杂数据分析的项目 |
| **MongoDB** | 非关系型、灵活 | 数据结构经常变化的项目 |
| **SQLite** | 轻量级、文件数据库 | 小型应用、移动应用 |

**对于您的 Todo List 项目，MySQL 是最佳选择**。

---

## 六、MySQL 的实际应用场景

### 1. 网站后台
- **用户数据**：用户名、密码、个人信息
- **文章数据**：博客文章、评论
- **订单数据**：电商订单、购物车

### 2. 企业系统
- **员工管理**：员工信息、考勤记录
- **库存管理**：商品信息、库存数量
- **财务数据**：收入、支出、报表

### 3. 移动应用
- **用户数据**：账号、设置
- **内容数据**：消息、动态
- **缓存数据**：临时存储

---

## 七、MySQL 与您项目的对应关系

### 在您的 Todo List 项目中

```typescript
// Entity（实体）定义表结构
@Entity('todos')
export class Todo {
  @PrimaryGeneratedColumn()  // 主键，自动递增
  id: number;

  @Column()  // 普通列
  title: string;

  @Column({ default: false })
  isCompleted: boolean;
}
```

**对应到 MySQL**：
- `@Entity('todos')` → 创建 `todos` 表
- `@PrimaryGeneratedColumn()` → `id` 列，主键，自动递增
- `@Column()` → `title` 列，字符串类型
- `@Column({ default: false })` → `isCompleted` 列，布尔类型，默认 false

**MySQL 中实际存储的数据**：
```
todos 表：
+----+------------------+-------------+
| id | title            | isCompleted |
+----+------------------+-------------+
| 1  | Learn NestJS     | 0           |
| 2  | Learn Vue 3      | 0           |
| 3  | Setup MySQL      | 1           |
+----+------------------+-------------+
```

---

## 八、总结

### MySQL 是什么？
- **数据库管理系统**：专门用来存储和管理数据的软件
- **关系型数据库**：数据以表的形式组织，表之间可以建立关系
- **持久化存储**：数据保存在硬盘上，不会丢失

### 为什么需要 MySQL？
1. **数据持久化**：服务重启后数据还在
2. **数据安全**：有备份和恢复机制
3. **性能优秀**：可以快速查询大量数据
4. **支持并发**：多人同时操作不会冲突
5. **易于管理**：可以用 SQL 语言灵活查询

### 在您的项目中
- **之前**：数据存在内存中，重启就丢失 ❌
- **现在**：数据存在 MySQL 中，永久保存 ✅

**就像从"便利贴"升级到"保险柜"**，数据更安全、更可靠！

---

## 延伸阅读

- [MySQL 官方文档](https://dev.mysql.com/doc/)
- [SQL 基础教程](https://www.w3schools.com/sql/)
- [TypeORM 文档](https://typeorm.io/)

